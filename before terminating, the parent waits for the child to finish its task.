/*
Write a program(using fork () and/or exec () commands) where parent and child 
execute: 
before terminating, the parent waits for the child to finish its task.
*/

#include <iostream>
#include <sys/types.h>
#include <unistd.h>
using namespace std;
int main(){
    pid_t pid = fork(); 
    if (pid < 0) {
        cout << "Error" << endl;
    } else if (pid == 0) {
        cout<<"Child process continue ......: " << endl << endl;
        for(int i=0; i<3; i++){
            cout << "Child process ID: " << getpid() << endl;
            cout << " child Parents ID: " << getppid() << endl;
        }
        cout << "Child process ends " << endl;
    } else {
        wait(NULL); // Wait for the child process to finish
        cout<< "Parent process continue ......: " << endl << endl;
        for(int i=0; i<3; i++){
            cout << "Parent's process ID: " << getpid() << endl;
            cout << "parent's parent  ID: " << pid << endl;
        }
        cout << "Parent process ends"  << endl;
    }
    return 0;
}
